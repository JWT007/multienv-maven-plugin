<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.7.1 at 2016-05-08 
 | Rendered using Apache Maven Fluido Skin 1.5
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160508" />
    <meta http-equiv="Content-Language" content="en" />
    <title>The MultiEnv Maven Plugin &#x2013; CPD Results</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.5.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    
          <style type="text/css">body{background-image: url('./images/profiles/pre-release.png');}</style>
    
  
    <script type="text/javascript" src="./js/apache-maven-fluido-1.5.min.js"></script>

                      </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="https://github.com/khmarbaise/multienv-maven-plugin">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Parent Project <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../https:/github.com/khmarbaise/smpp/smpp-plugins/index.html"  title="SoEBeS Maven Parent POM for Plugins">SoEBeS Maven Parent POM for Plugins</a>
</li>
                          </ul>
      </li>
                      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="index.html"  title="Introduction">Introduction</a>
</li>
                  
                      <li>      <a href="overview.html"  title="Overview">Overview</a>
</li>
                  
                      <li>      <a href="plugin-info.html"  title="Goals">Goals</a>
</li>
                  
                      <li>      <a href="usage.html"  title="Usage">Usage</a>
</li>
                          </ul>
      </li>
                      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="dependencies.html"  title="Dependencies">Dependencies</a>
</li>
                                  <li>      <a href="team-list.html"  title="Team">Team</a>
</li>
                                  <li>      <a href="issue-tracking.html"  title="Issue Management">Issue Management</a>
</li>
                                  <li>      <a href="license.html"  title="Licenses">Licenses</a>
</li>
                                  <li>      <a href="source-repository.html"  title="Source Code Management">Source Code Management</a>
</li>
                                  <li>      <a href="index.html"  title="About">About</a>
</li>
                                  <li>      <a href="project-summary.html"  title="Summary">Summary</a>
</li>
                                  <li>      <a href="dependency-convergence.html"  title="Dependency Convergence">Dependency Convergence</a>
</li>
                                  <li>      <a href="dependency-management.html"  title="Dependency Management">Dependency Management</a>
</li>
                                  <li>      <a href="plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="plugins.html"  title="Plugins">Plugins</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="findbugs.html"  title="FindBugs">FindBugs</a>
</li>
                                  <li>      <a href="github-report.html"  title="GitHub Report">GitHub Report</a>
</li>
                                  <li>      <a href="xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="testapidocs/index.html"  title="Test JavaDocs">Test JavaDocs</a>
</li>
                                  <li>      <a href="cpd.html"  title="CPD">CPD</a>
</li>
                                  <li>      <a href="pmd.html"  title="PMD">PMD</a>
</li>
                                  <li>      <a href="jdepend-report.html"  title="JDepend">JDepend</a>
</li>
                                  <li>      <a href="dependency-updates-report.html"  title="Dependency Updates Report">Dependency Updates Report</a>
</li>
                                  <li>      <a href="plugin-updates-report.html"  title="Plugin Updates Report">Plugin Updates Report</a>
</li>
                                  <li>      <a href="property-updates-report.html"  title="Property Updates Report">Property Updates Report</a>
</li>
                                  <li>      <a href="taglist.html"  title="Tag List">Tag List</a>
</li>
                                  <li>      <a href="plugin-info.html"  title="Plugin Documentation">Plugin Documentation</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                   
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                <div id="bannerLeft">
                <h2>The MultiEnv Maven Plugin</h2>
                </div>
                      </div>
        <div class="pull-right">                  <a href="http://www.soebes.de/" id="bannerRight">
                                                                                        <img src="http://soebes.de/images/weblogo.gif" />
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
              
                  <li id="publishDate">Last Published: 2016-05-08
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 0.1.0-SNAPSHOT
                      </li>
                      
              
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
              
                <ul class="nav nav-list">
                    <li class="nav-header">Parent Project</li>
                              
      <li>
  
                          <a href="../../https:/github.com/khmarbaise/smpp/smpp-plugins/index.html" title="SoEBeS Maven Parent POM for Plugins">
          <span class="none"></span>
        SoEBeS Maven Parent POM for Plugins</a>
            </li>
                                        <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="index.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                
      <li>
  
                          <a href="overview.html" title="Overview">
          <span class="none"></span>
        Overview</a>
            </li>
                
      <li>
  
                          <a href="plugin-info.html" title="Goals">
          <span class="none"></span>
        Goals</a>
            </li>
                
      <li>
  
                          <a href="usage.html" title="Usage">
          <span class="none"></span>
        Usage</a>
            </li>
                                        <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                    
      <li>
  
                          <a href="project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="project-reports.html" title="Project Reports">
          <span class="icon-chevron-down"></span>
        Project Reports</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="findbugs.html" title="FindBugs">
          <span class="none"></span>
        FindBugs</a>
            </li>
                    
      <li>
  
                          <a href="github-report.html" title="GitHub Report">
          <span class="none"></span>
        GitHub Report</a>
            </li>
                    
      <li>
  
                          <a href="xref/index.html" title="Source Xref">
          <span class="none"></span>
        Source Xref</a>
            </li>
                    
      <li>
  
                          <a href="xref-test/index.html" title="Test Source Xref">
          <span class="none"></span>
        Test Source Xref</a>
            </li>
                    
      <li>
  
                          <a href="surefire-report.html" title="Surefire Report">
          <span class="none"></span>
        Surefire Report</a>
            </li>
                    
      <li>
  
                          <a href="apidocs/index.html" title="JavaDocs">
          <span class="none"></span>
        JavaDocs</a>
            </li>
                    
      <li>
  
                          <a href="testapidocs/index.html" title="Test JavaDocs">
          <span class="none"></span>
        Test JavaDocs</a>
            </li>
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>CPD</a>
          </li>
                    
      <li>
  
                          <a href="pmd.html" title="PMD">
          <span class="none"></span>
        PMD</a>
            </li>
                    
      <li>
  
                          <a href="jdepend-report.html" title="JDepend">
          <span class="none"></span>
        JDepend</a>
            </li>
                    
      <li>
  
                          <a href="dependency-updates-report.html" title="Dependency Updates Report">
          <span class="none"></span>
        Dependency Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="plugin-updates-report.html" title="Plugin Updates Report">
          <span class="none"></span>
        Plugin Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="property-updates-report.html" title="Property Updates Report">
          <span class="none"></span>
        Property Updates Report</a>
            </li>
                    
      <li>
  
                          <a href="taglist.html" title="Tag List">
          <span class="none"></span>
        Tag List</a>
            </li>
                    
      <li>
  
                          <a href="plugin-info.html" title="Plugin Documentation">
          <span class="none"></span>
        Plugin Documentation</a>
            </li>
              </ul>
        </li>
            </ul>
              
                            <form id="search-form" action="https://www.google.com/search" method="get" >
    
  <input value="https://khmarbaise.github.io/multienv-maven-plugin/" name="sitesearch" type="hidden"/>
  <input class="search-query" name="q" id="query" type="text" />
</form>
<script type="text/javascript" src="https://cse.google.com/brand?form=search-form"></script>
          
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                             <a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy">
        <img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" />
      </a>
                  </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2><a name="CPD_Results"></a>CPD Results</h2>
<p>The following document contains the results of PMD's  <a class="externalLink" href="http://pmd.sourceforge.net/cpd.html">CPD</a> 5.3.5.</p></div>
<div class="section">
<h2><a name="Duplications"></a>Duplications</h2>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/soebes/maven/plugins/multienv/ConfigurationMojo.java</td>
<td><a href="./xref/com/soebes/maven/plugins/multienv/ConfigurationMojo.html#L68">68</a></td></tr>
<tr class="a">
<td>com/soebes/maven/plugins/multienv/EnvironmentMojo.java</td>
<td><a href="./xref/com/soebes/maven/plugins/multienv/EnvironmentMojo.html#L64">64</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>    @Parameter
    private String escapeString;

    /**
     * Whether to escape backslashes and colons in windows-style paths.
     */
    @Parameter( defaultValue = &quot;true&quot; )
    private boolean escapeWindowsPaths;

    /**
     * The list of extra filter properties files to be used along with System properties, project properties, and filter
     * properties files specified in the POM build/filters section, which should be used for the filtering during the
     * current mojo execution. &lt;br/&gt;
     * Normally, these will be configured from a plugin's execution section, to provide a different set of filters for a
     * particular execution. For instance, starting in Maven 2.2.0, you have the option of configuring executions with
     * the id's &lt;code&gt;default-resources&lt;/code&gt; and &lt;code&gt;default-testResources&lt;/code&gt; to supply different configurations
     * for the two different types of resources. By supplying &lt;code&gt;extraFilters&lt;/code&gt; configurations, you can separate
     * which filters are used for which type of resource.
     */
    @Parameter
    private List&lt;String&gt; filters;

    /**
     * Support filtering of filenames folders etc.
     */
    @Parameter( defaultValue = &quot;false&quot; )
    private boolean fileNameFiltering;

    /**
     * &lt;p&gt;
     * Set of delimiters for expressions to filter within the resources. These delimiters are specified in the form
     * 'beginToken*endToken'. If no '*' is given, the delimiter is assumed to be the same for start and end.
     * &lt;/p&gt;
     * &lt;p&gt;
     * So, the default filtering delimiters might be specified as:
     * &lt;/p&gt;
     * 
     * &lt;pre&gt;
     * &amp;lt;delimiters&amp;gt;
     *   &amp;lt;delimiter&amp;gt;${*}&amp;lt;/delimiter&amp;gt;
     *   &amp;lt;delimiter&amp;gt;@&amp;lt;/delimiter&amp;gt;
     * &amp;lt;/delimiters&amp;gt;
     * &lt;/pre&gt;
     * &lt;p&gt;
     * Since the '@' delimiter is the same on both ends, we don't need to specify '@*@' (though we can).
     * &lt;/p&gt;
     */
    @Parameter
    private LinkedHashSet&lt;String&gt; delimiters;

    /**
     * Use default delimiters in addition to custom delimiters, if any.
     */
    @Parameter( defaultValue = &quot;true&quot; )
    private boolean useDefaultDelimiters;

    /**
     * Additional file extensions to not apply filtering (already defined are : jpg, jpeg, gif, bmp, png)
     */
    @Parameter
    private List&lt;String&gt; nonFilteredFileExtensions;

    /**
     * stop searching endToken at the end of line
     */
    @Parameter( defaultValue = &quot;false&quot; )
    private boolean supportMultiLineFiltering;

    /**
     * Create the unpack folder for later unpacking of the main artifact.
     * 
     * @return The folder which has been created.
     * @throws MojoExecutionException in case of failures.
     */
    private File createUnpackFolder()
        throws MojoFailureException, MojoExecutionException
    {
        // TODO: Should we use a different name or temp file? File.createTempFile( prefix, suffix );
        File unpackFolder = new File( getOutputDirectory(), &quot;configuration-maven-plugin-unpack&quot; );

        deleteFolderOfPreviousRunIfExist( unpackFolder );

        if ( !unpackFolder.mkdirs() )
        {
            throw new MojoExecutionException( &quot;The unpack folder &quot; + unpackFolder.getAbsolutePath()
                + &quot; couldn't generated!&quot; );
        }
        return unpackFolder;
    }

    private void deleteFolderOfPreviousRunIfExist( File folderOfPreviousRun )
        throws MojoExecutionException
    {
        
        if ( folderOfPreviousRun.exists() )
        {
            try
            {
                FileUtils.deleteDirectory( folderOfPreviousRun );
            }
            catch ( IOException e )
            {
                throw new MojoExecutionException( &quot;Failure while deleting &quot; + folderOfPreviousRun.getAbsolutePath(),
                                                  e );
            }
        }
    }

    private void filterResources( File outputDirectory )
        throws MojoExecutionException
    {

        Resource res = new Resource();
        // TODO: Check how to prevent hard coding here?
        res.setDirectory( getSourceDirectory().getAbsolutePath() );
        res.setFiltering( true );
        // TODO: Check if it makes sense to make this list configurable?
        res.setIncludes( Collections.singletonList( &quot;**/*&quot; ) );

        List&lt;String&gt; filtersFile = new ArrayList&lt;String&gt;();
        MavenResourcesExecution execution =
            new MavenResourcesExecution( Collections.singletonList( res ), outputDirectory, getMavenProject(),
                                         getEncoding(), filtersFile, nonFilteredFileExtensions, getMavenSession() );

        execution.setEscapeString( escapeString );
        execution.setSupportMultiLineFiltering( supportMultiLineFiltering );
        // TODO: Check if we need a parameter?
        execution.setIncludeEmptyDirs( true );
        execution.setEscapeWindowsPaths( escapeWindowsPaths );
        execution.setFilterFilenames( fileNameFiltering );
        //// execution.setFilters( filters );
        //
        // // TODO: Check if we need a parameter?
        execution.setOverwrite( true );
        execution.setDelimiters( delimiters, useDefaultDelimiters );
        execution.setEncoding( getEncoding() );
        //
        // execution.setUseDefaultFilterWrappers( true );

        if ( nonFilteredFileExtensions != null )
        {
            execution.setNonFilteredFileExtensions( nonFilteredFileExtensions );
        }

        try
        {
            mavenResourcesFiltering.filterResources( execution );
        }
        catch ( MavenFilteringException e )
        {
            getLog().error( &quot;Failure during filtering.&quot;, e );
            throw new MojoExecutionException( &quot;Failure during filtering&quot;, e );
        }

    }

    private String getArchiveExtensionOfTheProjectMainArtifact()
        throws MojoExecutionException
    {
        if ( getMavenProject().getArtifact() == null )
        {
            throw new MojoExecutionException( &quot;No main artifact has been set yet.&quot; );
        }

        if ( getMavenProject().getArtifact().getFile() == null )
        {
            throw new MojoExecutionException( &quot;No main artifact file has been set yet.&quot; );
        }

        return FileUtils.getExtension( getMavenProject().getArtifact().getFile().getAbsolutePath() ).toLowerCase();

    }

    private File createPluginResourceOutput()
        throws MojoExecutionException
    {
        // TODO: Should we use a different name? Or temp File?
        File resourceResult = new File( getOutputDirectory(), &quot;configuration-maven-plugin-resource-output&quot; );

        deleteFolderOfPreviousRunIfExist( resourceResult );

        if ( !resourceResult.mkdirs() )
        {
            throw new MojoExecutionException( &quot;Failure while trying to create &quot; + resourceResult.getAbsolutePath() );
        }

        return resourceResult;
    }

    public void execute()
        throws MojoExecutionException, MojoFailureException
    {
        String[] identifiedEnvironments = getTheEnvironments( getSourceDirectory() );

        if ( identifiedEnvironments.length == 0 )
        {
            getLog().warn( &quot;No Environment folders found.&quot; );
            return;
        }

        createLoggingOutput( identifiedEnvironments );</pre></div></td></tr></table>
<table border="0" class="table table-striped">
<tr class="a">
<th>File</th>
<th>Line</th></tr>
<tr class="b">
<td>com/soebes/maven/plugins/multienv/ConfigurationMojo.java</td>
<td><a href="./xref/com/soebes/maven/plugins/multienv/ConfigurationMojo.html#L289">289</a></td></tr>
<tr class="a">
<td>com/soebes/maven/plugins/multienv/EnvironmentMojo.java</td>
<td><a href="./xref/com/soebes/maven/plugins/multienv/EnvironmentMojo.html#L294">294</a></td></tr>
<tr class="b"><td colspan='2'>
<div>
<pre>                File createArchiveFile = createArchiveFile( targetFolder, environment, archiveType );
                getProjectHelper().attachArtifact( getMavenProject(), getMavenProject().getPackaging(), environment,
                                                   createArchiveFile );
            }
            catch ( NoSuchArchiverException e )
            {
                getLog().error( &quot;Archive creation failed.&quot;, e );
            }
            catch ( IOException e )
            {
                getLog().error( &quot;IO Exception.&quot;, e );
            }
        }

    }

    private void createLoggingOutput( String[] identifiedEnvironments )
    {
        getLog().info( &quot;&quot; );
        getLog().info( &quot;We have found &quot; + identifiedEnvironments.length + &quot; environments.&quot; );

        StringBuilder sb = new StringBuilder();
        for ( int i = 0; i &lt; identifiedEnvironments.length; i++ )
        {
            if ( sb.length() &gt; 0 )
            {
                sb.append( ',' );
            }
            sb.append( identifiedEnvironments[i] );
        }

        getLog().info( &quot;We have the following environments: &quot; + sb.toString() );
        getLog().info( &quot;&quot; );
    }

    private File createArchiveFile( File targetFolder, String folder, String archiveExt )</pre></div></td></tr></table></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2011&#x2013;2016
                        <a href="http://www.soebes.com">SoftwareEntwicklung Beratung Schulung</a>.
            All rights reserved.    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>